!function(){"use strict";var e={n:function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,{a:a}),a},d:function(t,a){for(var r in a)e.o(a,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var t;e.g.importScripts&&(t=e.g.location+"");var a=e.g.document;if(!t&&a&&(a.currentScript&&(t=a.currentScript.src),!t)){var r=a.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t}();var t=window.wp.blocks,a=window.wp.i18n,r=window.wp.element,n=window.wp.components,l=window.wp.blockEditor,c=window.React,i=e.n(c),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=i().createContext&&i().createContext(o),m=function(){return m=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},m.apply(this,arguments)};function u(e){return e&&e.map((function(e,t){return i().createElement(e.tag,m({key:t},e.attr),u(e.child))}))}function d(e){return function(t){return i().createElement(p,m({attr:m({},e.attr)},t),u(e.child))}}function p(e){var t=function(t){var a,r=e.attr,n=e.size,l=e.title,c=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["attr","size","title"]),o=n||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),i().createElement("svg",m({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:a,style:m(m({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),l&&i().createElement("title",null,l),e.children)};return void 0!==s?i().createElement(s.Consumer,null,(function(e){return t(e)})):t(o)}function g(e){return d({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"}}]})(e)}function v(e){return d({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5v12h-2V2h2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"}}]})(e)}function h(e){return d({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"}}]})(e)}function w(e){return d({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"}}]})(e)}function f(e){return d({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"}}]})(e)}function b(e){return d({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"}},{tag:"path",attr:{d:"M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"}}]})(e)}var E=e.p+"images/placeholder-image.d2f148ed.png",y=e.p+"images/logo.cab89c57.png",N=e=>{let{tweet:t,updatedTweetBody:a}=e;const{imgPreview:n,body:l}=t;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"tweet-card"},(0,r.createElement)("div",{className:"card-heading"},(0,r.createElement)("img",{src:y,alt:"Greenpeace logo"}),(0,r.createElement)("div",{className:"heading-container"},(0,r.createElement)("div",{className:"heading-info"},(0,r.createElement)("p",{className:"twitter-name"},"Greenpeace Canada"),(0,r.createElement)("span",{className:"twitter-handle"},"@GreenpeaceCA")),(0,r.createElement)(f,null))),(0,r.createElement)("div",{className:"card-body"},void 0===l?(0,r.createElement)("p",{className:"tweet-text"},"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus."):(0,r.createElement)("p",{className:"tweet-text"},a),void 0===n?(0,r.createElement)("img",{src:E,alt:"placeholder image",className:"tweet-image"}):(0,r.createElement)("img",{src:n,alt:"character image",className:"tweet-image"}),(0,r.createElement)("div",{className:"tweet-card-actions"},(0,r.createElement)(h,null),(0,r.createElement)(g,null),(0,r.createElement)(w,null),(0,r.createElement)(b,null),(0,r.createElement)(v,null)))))},C=e=>{let{href:t,disabled:a}=e;return(0,r.createElement)("a",{href:t,target:"_blank",rel:"noopener",className:a?"btn-disabled":"tweet-btn"},"Click to tweet")},O=e=>{let{attributes:t,selectedTarget:a,setSelectedTarget:n,selectedCharacter:l,setSelectedCharacter:c,characterImage:i,setCharacterImage:o,imageUrl:s,setImageUrl:m,selectedTweetTemplate:u,setSelectedTweetTemplate:d,disabled:p,setDisabled:g}=e;if(!t)return null;const{data:v}=t;if(!v)return null;try{var h,w;const e=JSON.parse(v),{characters:t,targets:g}=e,f={target:null==g||null===(h=g[a])||void 0===h?void 0:h["twitter-handle"],imgPreview:i,imgURL:s,body:u,character:null===(w=t[l])||void 0===w?void 0:w.name},{target:b="<target>",character:E="<character>",imgPreview:y,imgURL:O,body:S}=f;let k,T;p=void 0===S||void 0===b||"<target>"===b||void 0===y||void 0===O||void 0===E||"<character>"===E,void 0!==S&&(k=S.replace("<target>",b).replace("<character>",E),T=k.replaceAll("#","%40"));const z=`https://twitter.com/intent/tweet?text=${T}%20${O}`;return(0,r.createElement)("div",{className:"tweet-container"},(0,r.createElement)("div",{className:"form-container"},(0,r.createElement)("label",null,"Pick Target*"),(0,r.createElement)("select",{onChange:e=>{let{target:t}=e;n(t.value)}},(0,r.createElement)("option",{value:""},"Select Target"),Object.keys(g||{}).map(((e,t)=>(0,r.createElement)("option",{key:t,value:e},g[e].name)))),(0,r.createElement)("label",null,"Pick Character*"),(0,r.createElement)("select",{onChange:e=>{let{target:t}=e;c(t.value),m(void 0),o(void 0)}},(0,r.createElement)("option",{value:""},"Select Character"),Object.keys(t||{}).map(((e,a)=>(0,r.createElement)("option",{key:a,value:e},t[e].name)))),function(e,t,a,n,l){var c;return e?(0,r.createElement)(r.Fragment,null,(0,r.createElement)("label",null,"Select Image"),(0,r.createElement)("div",{className:"preview-image-wrapper"},((null===(c=t[e])||void 0===c?void 0:c.images)||[]).map(((e,t)=>(0,r.createElement)("div",{className:"preview-image-container",key:t},(0,r.createElement)("input",{type:"radio",value:e,checked:e.preview===a,onChange:()=>{n(e.preview),l(e.value)}}),(0,r.createElement)("img",{src:e.preview,className:"preview-image"})))))):null}(l,t,i,o,m),(0,r.createElement)("label",null,"Select Template*"),(e["tweet-body"]||[]).map(((e,t)=>(0,r.createElement)("div",{key:t,className:"tweet-body-container"},(0,r.createElement)("input",{type:"radio",name:"body",value:e.tweet,onChange:e=>{let{target:t}=e;return d(t.value)}}),(0,r.createElement)("label",null,e.tweet))))),(0,r.createElement)("div",{className:"tweet-card-container"},(0,r.createElement)(N,{tweet:f,updatedTweetBody:k}),(0,r.createElement)(C,{disabled:p,href:z})))}catch(e){return console.error(e),(0,r.createElement)("p",null,"Incorrect JSON")}};function S(e){const{attributes:t}=e,[a,n]=(0,c.useState)(void 0),[l,i]=(0,c.useState)(void 0),[o,s]=(0,c.useState)(void 0),[m,u]=(0,c.useState)(void 0),[d,p]=(0,c.useState)(void 0),[g,v]=(0,c.useState)(!0);return(0,r.createElement)("div",{className:"mt-block-tweet-generator","data-mt-attributes":JSON.stringify(t)},(0,r.createElement)(O,{attributes:t,selectedTarget:a,setSelectedTarget:n,selectedCharacter:l,setSelectedCharacter:i,characterImage:o,setCharacterImage:s,imageUrl:m,setImageUrl:u,selectedTweetTemplate:d,setSelectedTweetTemplate:p,disabled:g,setDisabled:v}))}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},k.apply(this,arguments)}(0,t.registerBlockType)("twitter/tweetgen",{apiVersion:2,title:(0,a.__)("Tweet Generator","twitter"),description:(0,a.__)("Generate tweets from list of images and text","twitter"),category:"text",icon:"",edit:e=>{let{attributes:t,setAttributes:a}=e;const{data:c}=t,i=function(e){return t=>a=>{const r={};r[t]=a,e(r)}}(a);return(0,r.createElement)("div",(0,l.useBlockProps)(),(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(n.PanelBody,{title:"Enter your JSON here",initialOpen:!0},(0,r.createElement)(n.TextareaControl,{label:"JSON",help:"Ask Mohammad for help if you don't know what to put here ;)",value:c,onChange:i("data")}))),(0,r.createElement)("div",{className:"mt-block-tweet-generator-wrapper"},(0,r.createElement)(S,{attributes:t})))},save:e=>{let{attributes:t}=e;return(0,r.createElement)("div",k({},l.useBlockProps.save(),{className:"mt-block-tweet-generator-wrapper","data-mt-attributes":JSON.stringify(t)}),(0,r.createElement)("div",{className:"mt-block-tweet-generator"},(0,r.createElement)(O,{attributes:t})))},attributes:{data:{type:"string"}},example:{attributes:{data:'{"banks":{"<bankName>":{"name":"BANK NAME"}},"characters":{"<characterName>":{"name":"CHARACTER NAME", "images": [{ "preview": "https://via.placeholder.com/512", "value": "https://via.placeholder.com/512" }]}}}'}}})}();